# 모던 JavaScript 듀토리얼 day03

- 읽을파트: [파트 1 6.8] setTimeout과 setInterval을 이용한 호출 스케쥴링
- 평가: 유익, setTimeout 의 반환값을 이용해 스케쥴링을 취소하는 것도 유익했고, 스케쥴링에 대한 전반적인 내용을 알 수 있어 좋았다

---

## [파트 1 6.8] setTimeout과 setInterval을 이용한 호출 스케쥴링

- 호출 스케쥴링(scheduling a call)
  - 일정 시간이 지난 후에 원하는 함수를 예약 실행(호출)할 수 있게 하는 것
    - `setTimeout`을 이용해 일정 시간이 지난 후에 함수를 실행하는 방법
    - `setInterval`을 이용해 일정 시간 간격을 두고 함수를 실행하는 방법
  - 자바스크립트에 스케쥴링에 대한 명세는 존재하지 않습니다. 따라서 호스트 환경마다 차이가 있습니다
- `setTimeout`을 호출하면 '타이머 식별자(timer identifier)'가 반환됩니다
  - 스케쥴링을 취소하고 싶을 땐 이 식별자를 사용하면 됩니다
- 무언가를 일정 간격을 두고 실행하는 방법
  - 중첩 `setTimeout`을 이용하는 방법이 `setInterval`을 사용하는 방법보다 유연합니다
    - 호출 결과에 따라 다음 호출을 원하는 방식으로 조정해 스케쥴링 할 수 있기 때문입니다
  - `setInterval`을 사용하면 콜백함수 호출 사이의 지연 간격이 실제 명시한 간격보다 짧아집니다
    - 콜백함수를 실행하는데 '소모되는' 시간도 지연간격에 포함되기 때문입니다
  - 반면 중첩 `setTimeout`을 이용하면 명시한 지연이 보장됩니다
- 가비지 컬렉션과 setInterval, setTimeout
  - `setInterval`이나 `setTimeout`에 함수를 넘기면, 함수에 대한 내부 참조가 새로 만들어지고 이 참조정부는 스케쥴러에 저장됩니다
  - 따라서 해당 함수는 참조가 없어도 가비지 컬렉션의 대상이 되지 않습니다
  - 하지만 만약 함수가 외부렉시컬 환경을 참조하는 함수라면 함수가 메모리에 남아있는 동안 외부 변수 역시 메모리에 남아있게 됩니다
- 대기 시간이 0인 setTimeout을 사용하면 '현재 스크립트의 실행이 완료된 후 가능한 빠르게' 원하는 함수를 호출할 수 있습니다
- 지연 없이 중첩 `setTimeout`을 5회 이상 호출하거나 지연 없는 `setInterval`에서 호출이 5회 이상 미뤄지면 4밀리초 이상의 지연 간격이 강제로 더해집니다. 이는 브라우저에만 적용되는 사항이며, 하위 호환성을 위해 유지되고 있습니다
