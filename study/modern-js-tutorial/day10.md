# 모던 JavaScript 듀토리얼 day10

- 읽을파트: [파트 1 3.4] 닌자 코드, [파트 1 3.5] 테스트 자동화와 Mocha
- 평가: 유익, 닌자 코드는 서양식 유머가 크게 와닿지 않아 시큰둥했지만 테스트 내용은 너무 좋았습니다.

---

## [파트 1 3.5] 테스트 자동화와 Mocha

- BDD(Behavior Driven Development)
  - BDD는 테스트(test), 문서(documentation), 예시(example)를 한데 모아놓은 개념이다
    - 테스트: 함수가 의도하는 동작을 제대로 수행하고 있는지 보장함
    - 문서: 함수가 어떤 동작을 수행하고 있는지 설명해줌. `describe`와 `it`에 설명이 들어감
    - 예시: 실제 동작하는 예시를 이용해 함수를 어떻게 사용할 수 있는지 알려줌
  - BDD는 스펙을 먼저 작성하고 난 후에 구현을 시작합니다. 구현이 종료된 시점에는 스펙과 코드 둘 다를 확보할 수 있습니다
  - 핵심은 실패할 수 밖에 없는 테스트를 추가하고, 통과할 수 있게끔 코드를 개선하는 것
- 명세(specification) 또는 스펙(spec)
  - 코드가 무슨 일을 하는지 자연어로 표현한 것
  - 유스케이스에 대한 설명과 테스트
- 예시

  ```javascript
  describe("pow", function() {
    it("주어진 숫자의 n 제곱" function() {
        assert.equal(pow(2, 3), 8);
    });
  });
  ```

  - `describe("title", function() {...})`
    - 구현하고자 하는 기능에 대한 설명
    - 예시에서는 함수 `pow`가 어떤 동작을 하는지에 대한 설명이 들어갑니다
    - `it`블록을 한데 모아주는 역할
  - `it("유스케이스 설명", function() {...})`
    - 첫번째 인수엔 특정 유스케이스에 대한 설명이 들어갑니다
    - 두번째 인수엔 유스케이스 테스트 함수가 들어갑니다

- 개발순서
  - 요약: 명세를 작성하고 실행한 후 테스트를 모두 통과할때까지 코드를 작성하고, 다시 또 다른 테스트를 추가해 앞의 과정을 반복
- 테스트 라이브러리
  - Mocha: 테스트 프레임워크로, `describe`, `it`과 같은 테스팅 함수와 테스트 실행 관련 주요 함수를 제공
  - Chai: 다양한 assertion을 제공해주는 라이브러리
  - Sinon: 함수의 정보를 캐내는 데 사용되는 라이브러리로, 내장 함수 등을 모방합니다
- 규칙
  - 테스트 하나에선(`it`블록) 한 가지만 확인하기
- 중첩 describe
  - 중첩 `describe`는 새로운 테스트 '하위 그룹'을 정의할 때 사용합니다
  - 새로 정의된 테스트 하위 그룹은 테스트 결과 보고서에 들여쓰기 된 상태로 출력됩니다
- 라이플싸이클 메서드
  - `before`은 (전체) 테스트가 실행되기 전에 실행되고
  - `after`는 (전체) 테스트가 실행된 후에 실행됩니다
  - `beforeEach`는 매 `it`이 실행되기 전에 실행되고, `afterEach`는 매 `it`가 실행된 후에 실행됩니다
  - `beforeEach/afterEach`와 `before/after`는 대개 초기화 용도로 사용됩니다.
    e.g. 카운터 변수를 0으로 만들거나 테스트가 바뀔 때(혹은 테스트 그룹이 바뀔 때)마다 해줘야 하는 작업이 있으면 이들을 이용할 수 있습니다
- 테스트는 (명확한 입력값, 출력값)과 함께 (여러 개의 `it` 블록으로 쪼개 작성)하는 것이 좋습니다
