# 모던 JavaScript 듀토리얼 day03

- 읽을파트: [파트 1 4.2] 참조에 의한 객체 복사,[파트 1 4.3] 가비지 컬렉션
- 평가: 유익, 짧게 핵심을 전달해서 감탄했습니다

---

## [파트 1 4.2] 참조에 의한 객체 복사

- 객체와 원시타입의 근본적인 차이 중 하나는 객체는 '참조에 의해(by reference)' 저장되고 복사된다는 것입니다
  - 원시값(문자열, 숫자, 불린 값)은 '값 그대로' 저장, 할당되고 복사됩니다
  - 객체를 복사하면 객체가 저장되어 있는 '메모리 주소'인 객체에 대한 '참조 값'이 저장됩니다
  - 객체의 참조값이 복사되는 것이지, 객체는 복사되지 않습니다

### 참조에 의한 비교

- 비교시 피연산자인 두 객체가 동일한 객체인 경우에 참을 반환합니다
- 객체가 원시형과 비교할 시 객체는 원시형으로 변환됩니다

### 객체 복사, 병합과 Object.assign

- 자바스크립트는 객체 복제 내장메서드를 지원하지 않습니다
  - 복제를 하고자 한다면, 새로운 객체를 만든 다음 기존 객체의 프로퍼티들을 순회해 원시수준까지 프로퍼티를 복사하면 됩니다

## [파트 1 4.3] 가비지 컬렉션

- 가비지 컬렉션은 엔진이 자동으로 실행하며, 개발자가 이를 실행하거나 막을 수 없습니다

### 가비지 컬렉션 기준

- 자바스크립트는 도달 가능성(reachability)라는 개념을 사용해 메모리 관리를 수행합니다
  - 도달 가능한(reachable) 값은 어떻게든 접근하거나 사용할 수 있는 값을 의미합니다
- 1. 루트: 태생부터 도달가능한 값으로, 명백한 이유없이는 삭제되지 않습니다
  - 현재 함수의 지역변수와 매개변수
  - 중첩 함수의 체인에 있는 함수에서 사용되는 변수와 매개변수
  - 전역변수
  - 기타 등등
- 2. 루트가 참조하는 값이나 체이닝으로 루트에서 참조할 수 있는 값
- 외부로 나가는 참조는 도달 가능한 상태에 영향을 주지 않습니다.
  외부에서 들어오는 참조만이 도달 가능한 상태에 영향을 줍니다

### 내부 알고리즘

- mark-and-sweep: 루트에서부터 재귀적으로 도달가능한 상태를 확인한 후, mark 되지 않은 객체 삭제
- 최적화 기법
  - generational collection(세대별 수집)
  - incremental collection(점진적 수집)
  - idle-time collection(유휴 시간 수집)
