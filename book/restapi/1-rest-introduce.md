---
layout  : wiki
title   : REST 소개
summary : 
date    : 2023-07-27 00:46:13 +0900
updated : 2023-07-27 00:46:13 +0900
tag     : book api-design
toc     : true
public  : true
parent  : [[/book/restapi]]
latex   : false
resource: 92D01AD2-3D11-41BB-971F-C61BECC0BE2F
---
* TOC
{:toc}


# 1. REST 소개

## 1.1 Hello World Wild Web

- URI: 모든 웹 다큐먼트에 할당된 유일한 주소
- HTTP: 인터넷을 통해 컴퓨터가 통신하기 위한 메시지 기반 언어
- HTML: 다큐먼트를 표현하기 위한 하이퍼텍스트 마크업 언어
  - 도큐먼트는 관련된 다른 도큐먼트에 대한 링크를 포함할 수 있다
- 웹서버

## 1.2 웹 아키텍처처

### Web's architecture style

- 웹의 지속적인 확장을 위한 여섯 가지 범주의 제약점

  1. 클라이언트 / 서버 (Client/Server)
  2. 균일한 인터페이스 (Uniform Interface)
  3. 계층 시스템 (Layered System)
  4. 캐시 (Cache)
  5. 무상태 (Stateless)
  6. 주문형 코드 (Code-on-demand)

### 클라이언트/서버

- 웹은 클라이언트/서버 기반 시스템이다
- 클라이언트/서버 규약의 핵심사항은 관심사의 분리
  - 역할의 분리로 클라이언트/서버는 각자의 언어 및 기술을 독립적으로 구현 및 배포

### 균일한 인터페이스

- 웹을 구성하는 클라이언트, 서버, 네트워크 등의 **매체 간 인터페이스**는 각 인터페이스의 일관성에 기반
- 인터페이스의 제약
  1. 리소스 식별
  2. 표현을 통한 리소스 처리
  3. 자기-서술적 메시지
  4. 애플리케이션 상태 엔진으로서의 하이퍼미디어(HATEOAS)

#### 리소스 식별

- 리소스는 웹 상에서 서로 구별되는 어떤 개념이다

#### 표현을 통한 리소스 처리

- 클라이언트는 리소스 표현을 처리한다
  - 같은 리소스라도 각각의 클라이언트에서 다른 방식으로 표현할 수 있다
  - ex. 하나의 도큐먼트가 웹 브라우저에서는 HTML로 특정 프로그램에서는 JSON으로 표현
  - 표현은 리소스와 상호작용하는 방법이지 리소스 그 자체가 아니다
  - 리소스는 다른 방식과 형식으로 표현되지만 식별자 자체는 변하지 않는다

#### 자기-서술적 메시지

- 자기-서술적 메시지는 메타데이터를 포함한다 (헤더)
  - 리소스의 상태, 표현 형식과 크기, 메시지 자신에 대한 추가정보
  - ex. 클라이언트는 서버가 관리하는 리소스인 웹 페이지를 새로운 상태로 업데이트하도록 제한하는 표현을 전달한다

#### HATEOAS

- 리소스의 상태 표현은 관련 리소스의 링크를 포함

#### 계층 시스템

- 계층 시스템이라는 제약 조건은 프락시 또는 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있게 한다
- 웹의 일관된 인터페이스를 사용하면 중간매체를 클라이언트와 서버 사이에 없는것처럼 배치가능

#### 캐시

- 캐시는 웹 서버가 응답데이터 마다 캐시 여부를 선언한다
- 캐싱: 명령어와 데이터를 캐시 기억장치 또는 디스크 캐시에 일시적으로 저장
- 캐시는 클라이언트와 서버 사이의 네트워크 경로 어디든 위치 (웹서버단, 콘텐츠 전송망(CDN), 클라이언트 내)

#### 무상태

- 웹서버가 클라이언트의 상태를 관리할 필요가 없다
  - 따라서 각 클라이언트는 웹 서버와 상호작용하는 관련 상황정보를 직접 관리
  - 웹서버는 복잡한 커뮤니케이션을 위해 필요한 상태관리를 클라이언트에 맡김으로써 더 많은 클라이언트에 서비스

#### 주문형코드

- 스크립트나 플러그인 같은 실행가능한 프로그램을 일시적으로 클라이언트에 전송하여 클라이언트가 실행
- 클라이언트는 필요할 때마다 서버에서 내려받은 실행코드를 이해해야한다 -> 주문형 코드는 웹의 구조적 스타일에서 유일한 선택사항


## 1.5 REST API

- REST API란 REST 구조 스타일에 적합한 Web API
- REST API를 제공하는 웹 서비스를 'RESTful'하다고 한다
- REST API는 상호연결된 리소스의 결합체이며, 이 리소스 집합을 일컬어 REST API의 리소스 모델이라 한다

# 2. URI 식별자 설계

## 2.1 URI

- REST API는 리소스를 나타낼 때 URI를 사용한다

## 2.2 URI 형태

### RFC 3986의 URI 문법

- URI = scheme `"://" authority "/" path ["?" query]["#" fragment]`

### 규칙: 슬래시 구분자(/)는 계층관계를 나타내는데 사용

### 규칙: URI 마지막 문자로 슬래시(/)를 포함하지 않는다

- URI가  다르다는 것은 리소스가 다르다는 것이다.
- 따라서 애매하게 리소스를 식별하려는 클라이언트의 시도를 그대로 받아들여서는 안된다

### 규칙: 하이픈(-)은 URI 가독성을 높이는 데 사용한다

- 하이픈을 사용해서 가독성을 높인다
- URI에서는 문장 내 공백을 하이픈으로 바꿀 수 있다

### 규칙: 밑줄(`_`)은 URI에 사용하지 않는다

- 글꼴에 따라 다르긴 하지만 밑줄은 보기 어렵거나 밑줄 때문에 문자가 완전히 가려지기도 한다

### 규칙: URI 경로에는 소문자가 적합하다

- RFC 3986은 URI 스키마와 호스트를 제외하고는 대소문자를 구별한다고 규정
- 대소문자를 섞어 사용하면 혼란을 일으킬 가능성

### 규칙: 파일 확장자는 URI에 포함시키지 않는다

- REST API에서는 메시지 바디 내용의 포맷을 나타내기 위해 `Content-Type` 헤더를 통해 전달한다

## 2.4 리소스 모델링

## 2.5 리소스 원형

### 도큐먼트

- 도큐먼트 리소스는 객체 인스턴스나 데이터베이스 레코드와 유사한 단일개념
- 도큐먼트의 상태표현은 값을 가진 필드와 다른 관련 리소스와의 링크를 가진다

