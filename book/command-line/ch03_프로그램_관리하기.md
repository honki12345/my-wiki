# 리눅스 입문자를 위한 명령어 사전

## 3. 프로그램 관리하기

### `&`: 백그라운드로 실행하기

- 명령어 끝에 `&`를 붙여서 실행하면 명령어 실행시 셸은 대기 상태가 아니라 바로 다음 명령어를 입력할 수 있는 상태가 됩니다

### `ctrl + z, ctrl + c`: 실행 중인 프로그램 정지, 종료하기

- `ctrl + z`로 프로그램을 (일시)정지하고, `fg` 명령어로 정지한 프로그램에 다시 복귀할 수 있습니다
- `ctrl + c`: 작업 중인 프로그램을 강제 종료합니다

### `jobs`: 실행 중인 프로그램 표시하기

- 백그라운드로 실행 중인 프로그램이나 `ctrl + z`로 정지한 프로그램 작업 번호가 기억나지 않으면 `jobs` 명령어로 작업 목록을 표시해서 확인합니다
- 주요 옵션
  - `-l`: 프로세스 ID를 표시합니다
  - `-p`: 작업 그룹 리더(작업을 구성하는 여러 프로세스 중에서 제일 처음 입력한 명령어로 실행한 프로세스)의 프로세스 ID만 표시합니다
- 작업 번호 지정
  - 현재작업: `%%, %+`
  - 이전작업: `%-`
  - n번 작업: `%n`
  - 명령어명이 string으로 시작하는 작업: `%string`
  - 명령어명이 string이 포함된 작업: `%?string`
- 사용 예
  - `$ jobs`
    - jobs 명령어를 실행한 셸이 제어하는 작업 정보를 표시합니다
  - `$ jobs %1 %3`
    - 작업 번호 1과 3의 작업정보를 표시합니다
  - `$ jobs %%`, `$ jobs %+`
    - 현재 작업 정보를 표시합니다
  - `$ jobs %-`
    - 이전 작업 정보를 표시합니다
  - `$ jobs %ca`
    - 명령어명이 ca로 시작하는 작업을 표시합니다
  - `$ jobs %?ls`
    - 명령어명에 ls가 포함된 작업을 표시합니다

### `fg`: 프로그라운드로 실행하기

- `&`를 붙여서 백그라운드로 실행한 프로그램을 포그라운드로 실행하거나 `ctrl + z`로 일시정지한 프로그램을 재개할 때 `fg` 명령어를 실행합니다
- 사용 예
  - `$ fg`
    - 현재 작업을 포그라운드로 실행합니다
  - `$ fg %2`
    - 작업 번호 2 작업을 포그라운드로 실행합니다

### `bg`: 정지한 프로그램을 백그라운드로 재개하기

- `ctrl + z` 등으로 일시정지한 프로그램을 백그라운드로 재개하려면 `bg` 명령어를 사용합니다
- 사용 예
  - `$ bg`
    - 현재 작업을 백그라운드로 실행합니다
  - `$ bg %3`
    - 작업 번호 3 작업을 백그라운드로 실행합니다

### `ps`: 프로세스 상태 표시하기

- 실행 중인 프로그램을 어떤 셸에서 실행했는지에 관계없이 모든 셸에서 조작하려면 프로세스 ID가 필요합니다. 프로세스 ID는 `ps` 명령어로 확인합니다
- 주요 옵션
  - `-u`: 사용자명과 시작 시각 등을 표시합니다
  - `-a`: 모든 사용자의 프로세스 정보를 표시합니다
  - `-x`: 제어 터미널이 없는 프로세스 정보(데몬 등)을 표시합니다
  - `-l`: 더 상세한 정보를 표시합니다
  - `-f`: 프로세스의 부모 자식 관계를 트리 형태로 표시합니다
  - `-w`: 프로세스 정보 표시 내용을 늘립니다
  - `-j`: 부모 프로세스, 프로세스 그룹 같은 정보를 표시합니다
  - `-m`: 스레드를 표시합니다
  - `ttty`: tty 터미널이 제어하는 프로세스만 표시합니다
  - `U user`: user 사용자가 실행한 프로세스만 표시합니다
- 주요 표시 항목
  - USER: 사용자명
  - UID: 사용자 ID
  - PID: 프로세스 ID
  - PPID: 부모 프로세스 ID
  - TT, TTY: 제어 터미널
  - STAT
    - 프로세스 상태
      - R: 실행 가능 상태
      - S: 슬립 상태
      - D: 디스크 내부
      - T: 정지 상태
      - Z: 좀비 상태
    - 보조 정보
      - <: 우선 순위가 높은 프로세스
      - N: 우선 순위가 낮은 프로세스
      - L: 메모리 내에 락이 걸린 페이지가 있음
      - s: 섹션 리더
      - l: 멀티 스레드
      - +: 포그라운드 프로세스
  - TIME: CPU 시간
  - COMMAND, CMD: 명령어
  - %CPU: CPU 이용률
  - %MEM: 메모리 이용률
  - SIZE: 가상 이미지 크기(text + data + stack)
  - RSS: 실제 메모리(내재 세트) 크기
  - START: 시작시각
  - FLAGS: 플래그
  - NI: 프로세스 우선순위
  - WCHAN: 프로세스가 대기 상태일 때 커널 함수명
  - PAGEIN: 페이지 폴트 횟수
  - TSIZ: 텍스트 크기
  - DSIZ: 데이터 크기
  - LIM: 메모리 제한
- 사용 예
  - `$ ps 1000`
    - 프로세스 ID가 1000인 프로세스 상태를 표시합니다
  - `$ ps auxw | grep xeyes`
    - xeyes 프로그램 프로세스 상태를 표시합니다
  - `$ ps t1`
    - 터미널 에뮬레이터 (pts/1)가 제어하는 프로세스를 표시합니다
  - `$ ps auxf | less`
    - 모든 프로세스를 트리 형태로 표시하고 less 명령어로 봅니다
  - `$ ps auxwm`
    - 모든 프로세스와 스레드 정보를 표시합니다

### `kill, killall`: 프로그램 종료하기

- `ctrl + c`를 눌렀지만 반응이 없다면 kill 이나 killall을 사용합니다
- 주요 옵션
  - `-signal`, `-s signal`: 지정한 signal 시그널을 프로세스에 보냅니다
  - `-l`: 시그널 목록을 표시합니다
- 주요 시그널
  - `TERM`: 프로세스에 종료 신호를 보냅니다
  - `QUIT`: 프로세스에 종료 신호를 보냅니다(core 작성)
  - `KILL`: 프로세스에 강제 종료 신호를 보냅니다
  - `HUP`: 프로세스에 재시작 신호를 보냅니다
  - `STOP`: 프로세스에 정지 신호를 보냅니다
  - `CONT`: 프로세스에 재개 신호를 보냅니다
  - `INT`: 프로세스에 끼어들기 신호를 보냅니다
- 사용 예
  - `$ kill 200`, `$ kill %1`
    - 프로세스 ID 200, 작업 번호 1인 프로세스를 종료합니다 (TERM 시그널을 보냅니다)
  - `$ kill -KILL 256`
    - 응답하지 않는 프로세스(프로세스 ID 256)을 종료합니다
  - `$ kill -HUP %2`
    - 실행 중인 데몬 등의 설정을 변경했을 때 해당 프로세스 (작업 번호 2)를 재시작합니다
  - `$ killall xeyes`
    - 동작 중인 모든 xeyes 프로그램을 종료합니다

### `nice`: 우선 순위를 변경해서 프로그램 실행하기

- 프로그램 우선순위(priority)를 내리고 싶을 때 nice 명령어를 사용합니다
- 주요 옵션
  - `-number`, `-n number`: 명령어 nice 값에 number로 지정한 값을 설정해서 명령어를 실행합니다
- 사용 예
  - `$ nice xeyes`
    - xeyes 프로그램 우선순위를 낮춰서 (nice 값에 10을 더함) 실행합니다
  - `$ nice -3 xeyes`
    - xeyes 프로그램 nice 값에 3을 더해서 실행합니다

### `sleep`: 특정 시간만큼 재우기

### `crontab`: 지정한 시각마다 명령어 실행하기

- `cron`프로그램은 OS를 시작할 때 함께 실행되어, 명령어와 명령어를 실행할 시각이 적힌 설정파일(/etc/crontab 파일)을 읽어서 설정한 시각이 되면 해당 명령어를 실행합니다
  `crontab` 명령어를 사용자가 `cron` 을 설정할 때 사용하는 명령어입니다
- 서식: `crontab [-u 사용자명] 파일`, `crontab [-u 사용자명] [기타옵션]`
- 주요 옵션
  - `-l`: 등록된 실행시각과 명령어 목록을 표시합니다
  - `-r`: 등록을 취소합니다
  - `-e`: 파일이 아니라 (환경 변수 EDITOR에 지정된) 에디터로 직접 편집합니다
  - `-u user`: user 사용자의 cron을 수정합니다. 슈터유저 권한이 필요합니다
- 사용 예
  - `$ crontab ~/.crontab`
    - ~/.crontab 파일에 적힌 실행 시각과 명령어로 등록합니다
  - `$ crontab -l`
    - 등록된 실행시각과 명령어를 표시합니다
  - `$ crontab -r`
    - 현재 등록된 내용을 취소합니다
  - `# crontab -u maltman -l`
    - maltman 사용자가 등록한 cron 내용을 표시합니다
