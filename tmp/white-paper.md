# 백지코딩

## 0825

### 상속관계매핑

- 객체의 상속관계를 데이터베이스에서는 어떻게 매핑할 것인가?

#### 부모클래스를 테이블과 매핑하지 않을 때

- `@MappedSuperclass`

#### 부모클래스, 자식클래스 모두 테이블과 매핑할 때

- 조인전략
- 단일테이블전략
- 구현클래스마다 테이블전략

### 식별관계 vs 비식별관계

- 테이블 사이의 관계에서 외래키가 기본키에 포함되는지 여부에 따라 나누어진다
- 비식별관계는 다시 외래키에 `NULL`을 허용하는지에 따라서 **필수적 비식별관계**와 **선택적 비식별관계**로 나누어진다
- 비식별관계를 주로 사용하고 꼭 필요한 곳에만 식별관계 사용

### 복합키: 비식별관계매핑

- 복합키를 지원하는 방법으로는 `@IdClass`와 `@EmbeddedId` 가 있다

---

## 0822

### 전파옵션

- 트랜잭션이 수행중인데 또 다시 트랜잭션이 추가로 실행된다면?
  - 전파옵션에 따라 다르다

#### `REQUIRED`

- 기본설정
- (트랜잭션 동기화 매니저를 참고하여) 기본 트랜잭션이 없으면 생성하고, 있으면 참여한다

#### `REQUIRES_NEW`

- 항상 새로운 트랜잭션을 사용한다

## 0818

### 스프링 트랜잭션 추상화

- JPA, Mybatis 같은 데이터접근기술들은 각각 트랜잭션 처리 코드가 다르다
- 스프링 트랜잭션 추상화(`PlatformTransactionManager`)는 상이한 데이터접근기술의 트랜잭션 처리를 동일한 방식(인터페이스)으로 다룰 수 있게 해준다

### `@Transactionl`의 규칙

1. 우선순위 규칙 (더 자세한 것, 더 구체적인 것 우선)
2. 클래스에 적용되면 하위 메서드는 자동으로 적용된다

### 컨테이너에 트랜잭션 등록과정

- `@Transactional`이 클래스나 메서드에 하나라도 있으면 트랜잭션 AOP 는 해당 클래스 객체 대신 프록시 객체를 스프링 빈에 등록한다.
- 스프링 컨테이너는 해당 객체에 대한 의존관계 요청이 있으면 프록시를객체를 주입한다

### 프록시 내부 호출

- 프록시 객체의 메소드 내에서 메소드 호출을 할 경우 프록시 객체가 아닌 위임받은 대상 객체의 메소드가 호출된다.
