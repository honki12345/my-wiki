# 컴퓨터네트워크 2주차 스터디노트

## 면접 예상 질문

#### HTTPS

#### HTTPS에 대해서 설명햊세요

- HTTP는 1) 암호화되지 않은 평문으로 통신하고, 2) 통신상대를 인증하는 수단이 없으며, 3) 수신한 메시지가 도중에 변조되어있을 수 있다

- HTTPS는 이러한 문제를 해결하고자 암호화와 인증, 완전성 보호를 HTTP에 더한 것이다
- HTTPS는 HTTP 통신을 하는 소켓 부분을 SSL(Secure Socket Layer)나 TLS(Transport Layer Security)라는 프로토콜로 대체하고 있다

#### SSL/TLS이 뭔가요?

- SSL/TLS은 암호화, 해시화, 디지털 인증서라는 3가지 기술을 조합해 인터넷 상에 존재하는 보안위협에 대응한다

#### HTTPS 암호화 과정에 대해 설명해주세요 (SSL 핸드셰이크에 대해 설명해주세요)

#### DNS

#### DNS가 뭔가요?

- DNS(Domain Name System)은 IP주소와 도메인 이름을 상호 교환하는 프로토콜이다

#### DNS 작동방식에 대해 설명해주세요

- 웹브라우저가 웹사이트에 엑세스할 때는 먼저 DNS 서버에게 해당 도메인이름에 할당되어 있는 IP 주소를 문의하고, 응답받은 IP주소에 액세스한다

#### DNS 질의 종류에 대해 설명해주세요

#### UDP

#### UDP에 대해 설명해주세요

- UDP(User Datagram Protocol)은 즉시성을 요하는 애플리케이션에서 사용된다.
  포맷을 간단하게하고 확인응답을 생략하여 즉시성을 향상한다
- UDP는 보안과 안정성보다 속도와 효율성이 높다

#### UDP 체크섬에 대해 설명해주세요

- 체크섬은 받아들인 UDP 데이터그램의 손상여부 정합성 체크에 사용된다.
- 2바이트 필드이다.
- 검증에는 IP 헤더 체크섬과 동일하게 1의 보수 연산을 사용한다
- 데이터그램을 받은 단말은 검증에 성공하면 데이터그램을 받는다

#### 신뢰적 데이터 전송의 원리

#### 전송후 대기 프로토콜이 뭘까요?

#### 파이프라인 프로토콜이 뭘까요?

## 추가공부

#### 암호화키와 복호화키

- 암호화키: 데이터를 암호화하기 위한 것
- 복호화키: 암호화를 풀기 위한 것

#### 암호화방식

- 네트워크에서의 암호화방식은 클라이언트와 서버의 암호화키, 복호화키를 갖는 방식에 따라 공통키 암호화방식과 공개키 암호화방식으로 나뉜다

#### 공통키 암호화방식

- 공통키 암호화방식: 암호화키와 복호화키로 동일한 키(공통키)를 사용하는 암호화방식
  공통키 암호화방식은 **스트림 암호**와 **블록 암호** 로 나뉜다.

#### 스트림암호

- 1비트 단위 또는 1바이트 단위로 암호화 처리하는 암호화방식

#### 블록 암호

- 데이터를 일정 비트 수 단위(블록)으로 구분해 하나하나 암호화 처리를 적용

#### 공통키 암호화방식의 장/단점

- 장점: 처리속도와 처리부하
  구조 자체가 단순하고 명쾌하여 암호화/복호화 처리 속도가 빠르며 처리부하가 크지 않다
- 단점: 키 전송문제
  공통키 암호화방식은 암호화키와 복호화키가 같기 때문에 키가 유출되면 그것으로 끝

#### 공개키 암호화방식

- 공개키 암호화방식은 암호화키와 복호화키로 다른 키를 사용하는 암호화 방식 (또는 비대칭키 암호화방식)

- 공개키 암호화 방식을 지탱하는 것은 공개키와 비밀키이다
  이 둘은 키 페어라 불리며, 쌍으로 존재한다

#### 키페어

- 키 페어란 수학적인 관계로 성립하고 있어, 한쪽 키에서 다른 한쪽 키를 도출할 수 없다
- 한쪽 키에서 암호환 데이터는 다른 한쪽 키로만 복호화할 수 있다

#### 공개키 암호화방식 장/단점

- 장점: 암호화에 사용하는 공개키는 누구에게나 공개해도 좋으므로 키 전송에 신경쓰지않아도 된다
- 단점: 처리가 복잡하기 때문에 암호화 처리와 복호화 처리에 시간이 소요되며 처리부하도 걸린다

#### 하이브리드 암호화 방식

1. 웹서버는 공개키와 비밀키를 만든다
2. 웹서버는 공개키를 모두에게 공개/배포하고 비밀키만 보관한다
3. 웹브라우저는 공통키의 재료를 공개키로 암호화해서 보낸다
4. 웹서버는 공통키의 재료를 비밀키로 복호화한다
5. 웹서버와 웹브라우저는 공통키의 재료로부터 공통키를 생성한다
6. 웹브라우저는 애플리케이션 데이터를 공통키로 암호화한다
7. 웹서버는 애플리케이션 데이터를 공통키로 복호화한다

#### 해시함수

- 해시화는 단뱡향 해시 함수라는 특수한 계산을 이용해 데이터를 잘게 쪼개고, 같은 크기의 해시값으로 모은다
- 메세지를 요약하는 것 같은 이미지 때문에 '메시지 다이제스트'나 메시지의 지문을 얻는 것과 같기에 '핑거프린트'라고도 불린다

#### 메시지 인증코드(MAC, Message Authentication Code)

- 메시지 인증 코드는 애플리케이션 데이터와 MAC키 (공통키)를 뒤섞어 MAC값(해시값)을 계산하는 기술
- SSL에서는 메시지 인증에 사용하는 공통키는 공개키 암호화방식으로 교환한 공통키 재료로부터 생성된다

#### 디지털 인증서

- 디지털 인증서는 **서명 전 인증서**, **디지털 서명 알고리즘**, **디지털 서명**으로 구성된다
- 디지털 인증서를 받은 수신자는 디지털 서명을 인증기관의 공개키로 복호화해서 나온 해시값과 서명 전 인증서의 해시값과 비교, 검증한다

#### 서명 전 인증서

- 서명 전 인증서는 서버나 서버 소유자의 정보이다.
  여기에는 공통이름(URL), 인증서유효기간, 공개키, 디지털 서명 알고리즘 등이 포함된다

#### 디지털서명

- 디지털 서명은 서명 전 인증서를 디지털 서명의 알고리즘으로 지정된 해시함수로 해시화한 후 인증기관의 비밀키로 암호화한 것이다

#### 도메인이름

- 도메인 이름은 점`.`으로 구분된 문자열로 구성되어 있다.
  이 문자열 하나하나를 **라벨**이라 한다
- 도메인 이름은 FQDN(Fully Qualified Domain Name)이라 불리며 호스트 부분과 도메인 부분으로 구성되어 있다
- 호스트 부분은 FQDN의 가장 왼쪽에 있는 라벨로 컴퓨터 그 자체를 나타낸다
  도메인 부분은 오른쪽부터 순서대로 `루트`, `탑레벨도메인(TDL)`, `세컨드레벨도메인(2LD)`, ` 서드레벨도메인(3LD)``.... ` 으로 구성되어 있으며, 국가나 조직, 기업을 나타낸다

#### 도메인 부분

- 탑 레벨 도메인에는 지역(국가)별로 할당된 ccTLD(country code Top Level Domain)와 특정 영역/분야에 할당된 gLTD(generic Top Level Domain) 두가지가 있다
  예로들면 `kr`은 한국을 나타내는 ccTLD, `com`는 커머셜 사이트를 나타내는 gTLD

#### 도메인 트리

- 도메인 이름은 `루트`, `탑레벨도메인(TDL)`, `세컨드레벨도메인(2LD)`, ` 서드레벨도메인(3LD)``.... `으로 나누어지는 트리 형태의 계층구조이다
  오른쪽부터 순서대로 라벨을 따라가면 결국 대상이 되는 서버까지 도달한다

#### 대표적인 TLD

| 도메인종류                              | 도메인 | 용도                       |
| --------------------------------------- | ------ | -------------------------- |
| ccTLD<br />(국가별 코드 탑 레벨 도메인) | kr     | 한국                       |
|                                         | us     | 미국                       |
|                                         | uk     | 영국                       |
| gTLD<br />(분야별 코드 탑 레벨 도메인)  | com    | 커머셜 사이트              |
|                                         | net    | 네트워크에 관련된 서비스   |
|                                         | org    | 비영리 조직용 도메인       |
|                                         | app    | 애플리케이션 관련 서비스용 |
|                                         | cloud  | 클라우드 관련 서비스용     |
|                                         | blog   | 블로그 관련 서비스용       |

#### 이름결정(name resolution)과 존 전승(zone transfer)

#### 이름결정(name resolution)

- IP 주소와 도메인 이름을 서로 교환하는 처리
- 이름 결정은 **DNS 클라이언트**, **캐시서버**, **권위서버**가 서로 연계하여 성립

#### DNS 클라이언트(aka: 스텁리졸버(stub resolver))

- DNS 클라이언트는 DNS 서버에 이름 결정을 요청하는 클라이언트 단말/소프트웨어

  웹브라우저나, 메일소프트웨어, window의 'nslookup', linx의 'dig' 등

- DNS 클라이언트는 캐시 서버에 이름 결정 요청(재귀 쿼리)를 송신한다. 그리고 캐시서버로부터 받은 응답(DNS reply)의 결과를 일정시간 캐시(일시보관) 해둔다

#### 캐시서버(aka: 풀서비스리졸버(full service resolver), 참조서버(reference server))

- 캐시서버는 DNS 클라이언트로부터 재귀 쿼리를 받아, 인터넷 상에 있는 권위 서버로 이름결정요청(반복쿼리)를 송신한다
- 캐시서버도 DNS클라이언트와 마찬가지로 권위서버로부터 받은 응답결과를 일정기간 캐시해둔다

#### 권위서버(aka: 콘텐츠서버(contents server), 존서버(zone server))

- 권위서버는 자신이 관리하는 도메인에 관해 캐시 서버로부터 반복쿼리를 받아들인다
- 자신이 관리하는 도메인 범위(존zone)에 관련된 각종 정보(도메인이름, IP주소, 제어정보 등)을 존파일(zone file)이라는 데이터베이스에 리소스 레코드 형태로 저장
- 권위서버는 루트서버를 꼭짓점으로 트리형태의 계층구조로 구성

#### DNS 서버 자동화와 존 전승

- DNS 서버는 싱글 구성이 아니라 **프라이머리 DNS 서버**와 **세컨더리 DNS 서버**로 다중구성한다

#### 캐시 서버 다중화

- 캐시서버는 DNS 클라이언트가 문의한 이름결정정보를 캐싱할 뿐이다
  그러므로 프라이머리와 세컨더리 서버 사이에 정보를 동기화할 필요가 없다
- DNS 클라이언트 측의 설정으로 프라이머리와 세컨더리 서버를 지정해둔다

#### 권위 서버 다중화

- 같은 존 파일(도메인에 관한 정보)를 보존하기 위해 DNS 서버 사이에서 존 파일을 동기하는 처리를 **존 전송**이라 부른다
- 상쉬 DNS 서버에는 프라이머리 DNS 서버와 세컨더리 DNS 서버, 양측의 정보를 등록한다

#### 존 파일과 리소스 레코드

- 하나의 존 파일로 관리하는 도메인 이름의 범위를 **존**이라 한다.

#### DNS 메세지 포맷

- 이름결정은 애플리케이션 통신에 앞서 수행된다. 그러므로 속도가 중요하여 UDP를 사용한다

- 반면 존 전송은 존파일 교환이므로 신뢰성이 높은 TCP를 사용한다
