# 신입 개발자 기술면접 질문 정리 - 데이터베이스

- <https://dev-coco.tistory.com/158>

## 데이터베이스의 특징에 대해 설명해주세요

- 1. 실시간접근성(Real-Time Accessibility): 비정형적인 질의(조회)에 대하여 실시간 처리에 의한 응답이 가능해야 하며,
- 2. 지속적인 변화(Continuous Evolution): 데이터베이스의 상태는 동적입니다. 즉 새로운 데이터의 삽입(insert), 삭제(delete), 갱신(update)으로 항상 최신의 데이터를 유지해야합니다
- 3. 동시공용(Concurrent Sharing): 데이터베이스는 서로 다른 목적을 가진 여러 응용자들을 위한 것이므로 다수의 사용자가 동시에 같은 내용의 데이터를 이용할 수 있어야합니다
- 4. 내용에 의한 참조(Content Reference): 데이터베이스에 있는 데이터를 참조할 때 데이터 레코드의 주소나 위치에 의해서가 아니라 사용자가 요구하는 데이터 내용으로 찾습니다

## 데이터베이스 언어(DDL, DML, DCL)에 대해 설명해주세요

- DDL(정의어: Data Definition Language): 데이터베이스 구조를 정의, 수정, 삭제하는 언어(alter, create, drop)
- DML(조작어: Data Manipulation Language): 데이터베이스 내의 자료 검색, 삽입, 갱신, 삭제를 위한 언어(select, insert, update, delete)
- DCL(제어어: Data Control Language): 데이터에 대해 무결성 유지, 병행 수행 제어, 보호와 관리를 위한 언어(commit, rollback, grant, revoke)

## SELECT 쿼리의 수행 순서를 알려주세요

- FROM, JOIN > WHERE > GROUP BY > HAVING > SELECT > ORDER BY > LIMIT
- FROM(+JOIN)
  - FROM 절에서는 조회할 테이블을 지정합니다
  - 이후 JOIN을 실행하여 하나의 가상 테이블로 결합합니다
- WHERE
  - WHERE 절에서는 테이블에서 조건에 맞는 데이터를 필터링합니다
- GROUP BY
  - GROUP BY 절에서는 선택한 칼럼을 기준으로 조회한 레코드 목록을 그룹핑한다
- HAVING
  - HAVING 절은 그룹핑 후에 각 그룹에 사용되는 조건절이다.
- SELECT
  - SELECT 절은 여러 조건들을 처리한 후 남은 데이터에서 어떤 열을 출력해줄지 선택한다
- ORDER BY
  - 행이 순서를 어떻게 보여줄지 정렬 해주는 절이다
- LIMIT
  - 결과 중 몇개의 행을 보여줄지 선택한다

## 트리거(trigger)에 대해 설명해주세요

- 트리거는 특정 테이블에 대한 이벤트에 반응해 INSERT, DELETE, UPDATE 같은 DML 문이 수행되었을 때, 데이터베이스에서 자동으로 동작호도록 작성된 프로그램이다
- 사용자가 직접 호출하는 것이 아닌, 데이터베이스에서 자동적으로 호출한다는 것이 가장 큰 특징이다

## Index에 대해 설명해주시고, 장/단점에 대해 아는대로 말해주세요

- Index란 테이블을 처음부터 끝까지 검색하는 방법인 FTS(Full Table Scan)과는 달리 인덱스를 검색하여 해당 자료의 테이블을 액세스 하는 방법입니다
- 인덱스는 항상 정렬된 상태를 유지하기 때문에 원하는 값을 검색하는데 빠르지만, 새로운 값을 추가하거나 삭제, 수정하는 경우에는 쿼리문 실행 속도가 느려집니다

## DBMS는 Index를 어떻게 관리하고 있나요?

- B+Tree 인덱스 자료구조
  - 자식 노드가 2개 이상인 B-Tree를 개선시킨 자료구조이며
    BTree 리프노드들을 LinkedList로 연결하여 순차검색을 용이하게 합니다
    해시 테이블보다 나쁜 O(log2N)의 시간복잡도를 갖지만 일반적으로 사용되는 자료구조입니다
- 해시테이블
  - 칼럼의 값으로 생성된 해시를 기반으로 인덱스를 구현합니다
    시간복잡도가 O(1)이라 검색이 매우 빠릅니다
    부등호(<, >)와 같은 연속적인 데이터를 위한 순차검색이 불가능하기 때문에 사용에 적합하지 않습니다

## 정규화에 대해 설명해주세요

- 하나의 릴레이션에 하나의 의미만 존재하도록 릴레이션을 분해하는 과정이며, 데이터의 일관성, 최소한의 데이터중복, 최대한의 데이터 유연성을 위한 방법입니다
- 제1정규형: 테이블의 칼럼이 원자값(Atomic Value; 하나의 값)을 갖도록 분해합니다
- 제2정규형: 제1정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전함수종속이도록 분해합니다
  - 완전함수종속이란 종속자가 기본키에만 종속되며, 기본키가 여러 속성으로 구성되어 있을경우 기본키를 구성하는 모든 속성이 포함된 기본키의 부분집합에 종속된 경우입니다
- 제3정규형: 제2정규형을 만족하고, 이행적 함수종속을 없애도록 분해합니다
  - 이행적 함수종속이란 릴레이션에서 X, Y, Z라는 3개의 속성이 있을 때 X->Y, Y->Z의 종속관계가 있을 경우, X->Z가 성립될 때 이행적 함수종속이라고 한다
    다시말해, 기본키 이외의 속성이 그외 다른 속성을 결정할 수 없다
- BCNF정규형: 제3정규형을 만족하고, 함수종속성 X->Y가 성립할 때 모든 결정자 X가 후보키가 되도록 분해합니다

## 정규화에는 어떤 장점이 있고 어떤 단점이 있는지 아는대로 설명해주세요

- 장점
  - 1. 데이터베이스 변경시 이상현상이 발생하는 문제점을 해결할 수 있다
  - 2. 데이터베이스 구조 확장시 정규화된 데이터베이스는 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다
- 단점
  - 릴레이션의 분해로 인해 릴레이션 간의 연산(JOIN 연산)이 많아진다

## 역정규화

- 정규화를 거치면 릴레이션 간의 연산(JOIN 연산)이 많아지는데 이로인해 성능이 저하될 우려가 있다
  역정규화를 하는 가장 큰 이유는 성능문제가 있는(읽기 작업이 많이 필요한) DB의 전반적인 성능을 향상시키기 위함이다

## 이상현상의 종류에 대해 설명해주세요

- 이상현상은 테이블을 설계할 때 잘못 설계하여 데이터를 삽입, 삭제, 수정할 때 생기는 논리적 오류를 말합니다
- 1. 삽입이상: 자료를 삽입할 때 특정 속성에 해당하는 값이 없어 NULL을 입력해야하는 현상
- 2. 갱신이상: 중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상
- 3. 삭제이상: 어떤 정보를 삭제하면, 의도하지 않은 다른 정보까지 삭제되어버리는 현상

## SQL Injection이 무엇인지 설명해주세요

- SQL Injection 이란 공격자가 악의적인 의도를 갖는 SQL 구문을 삽입하여 데이터베이스를 비정상적으로 조작하는 코드 인젝션 공격기법입니다

## SQL injection을 방어 및 방지하기 위한 방법에 대해 알고있다면 설명해주세요

- 입력값을 검증하여 사용자의 입력이 쿼리에 동적으로 영향을 주는 경우 입력된 값이 개발자가 의도한 값(유효값)인지 검증합니다

## RDBMS와 NoSQL의 차이에 대해 설명해주세요

- RDBMS는 모든 데이터를 2차원 테이블 형태로 표현합니다
  - 장점: 스키마에 맞춰 데이터를 관리하기 때문에 데이터의 정합성을 보장할 수 있다
  - 단점: 시스템이 커질수록 쿼리가 복잡해지고 성능이 저하되며 scale-out이 어렵다(scale-up만 가능)
- NoSQL은 RDBMS와 반대로 데이터간의 관계를 정의하지 않고, 스키마가 없어 좀 더 자유롭게 데이터를 관리할 수 있으며, 컬렉션이라는 형태로 데이터를 관리합니다
  - 장점: 스키마 없이 key-value 형태로 데이터를 관리해 자유롭게 데이터를 관리할 수 있다
    데이터 분산이 용이하여 성능향상을 위한 scale-up 뿐만 아니라 scale-out 또한 가능하다
  - 단점: 데이터 중복이 발생할 수 있고, 중복된 데이터가 변경될 경우 수정을 모든 컬렉션에서 수행해야한다
    스키마가 존재하지 않기에 명확한 데이터 구조를 보장하지 않아 데이터구조결정이 어려울 수 있다
- RDBMS와 NoSQL은 어느 경우에 적합한가요?
  - RDBMS는 데이터구조가 명확하고, 변경될 여지가 없으며 스키마가 중요한 경우 사용하는 것이 좋습니다. 또한 중복된 데이터가 없어(데이터 무결성) 변경이 용이하기 때문에 관계를 맺고 있는 데이터가 자주 변경이 이루어지는 시스템에 적합합니다
  - NoSQL은 정확한 데이터 구조를 알 수 없고 데이터가 변경/확장 될 수 있는 경우 사용하는 것이 좋습니다. 또한 단점에서도 명확하듯 데이터 중복이 발생할 수 있으며 중복된 데이터가 변경될 시 모든 컬렉션에서 수정해야 하기 때문에 Update가 많이 이루어지지 않는 시스템에 좋으며, scale-out 이 가능하다는 장점을 활용해 막대한 데이터를 저장해야해서 DB를 scale-out 해야되는 시스템에 적합합니다

## 트랜잭션이란 무엇인지 설명해주세요

- 트랜잭션은 작업의 완전성을 보장해줍니다
- 작업들을 모두 처리하거나 처리하지 못할 경우 이전 상태로 복구하여 작업의 일부만 적용되는 현상이 발생하지 않게 만들어주는 기능입니다
- 하나의 트랜잭션은 commit 되거나 rollback 됩니다

## 트랜잭션의 특성(ACID)에 대해 설명해주세요

- 원자성(Atomicity): 작업이 모두 반영되던지 아니면 전혀 반영되지 않아야한다
- 일관성(Consistency): 실행이완료되면 언제나 일관성있는 상태를 유지해야 한다
- 독립성(Isolation): 둘 이상 트랜잭션이 동시에 실행될 경우 서로의 연산에 끼어들 수 없다
- 영속성(Durability): 완료된 결과는 영구적으로 반영되어야한다

## DB 락에 대해 설명해주세요

- DB Lock은 트랜잭션 처리의 순차성을 보장하기 위한 방법입니다
- 공유락(LS, Shared Lock): Read Lock라고도 하는 공유락은 트랜잭션이 읽기를 할 때 사용하는 락이며, 데이터를 읽기만하기 때문에 같은 공유락끼리는 동시에 접근이 가능합니다
- 배타락(LX, Exclusive Lock): Write Lock이라고도 하는 배타락은 데이터를 변경할 때 사용하는 락입니다. 트랜잭션이 완료될 때까지 유지되며, 배타락이 끝나기 전까지는 어떠한 접근도 허용하지 않습니다

## ElasticSearch의 키워드 검색과 RDBMS의 LIKE 검색의 차이에 대해 설명해주세요

- RDBMS는 단순 텍스트 매칭에 대한 검색만을 제공해 동의어나 유의어 같은 검색은 불가능합니다
  - MySQL 최신버전에서 n-gram 기반의 Full-text 검색을 지원하긴 하지만, 한글 검색의 경우 아직 많이 빈약하다
  - Full-text: 이미지, css, 글 등의 복합적으로 이뤄진 컨텐츠에서 순수하게 텍스트만 추출한 데이터를 의미
- 하지만 elasticsearch는 동의어나 유의어를 활용한 검색이 가능하며, 비정형 데이터의 색인과 검색이 가능하고, 역색인 지원으로 매우 빠른 검색이 가능합니다

## 옵티마이저에 대해 아는대로 말해주세요

- 옵티마이저는 SQL을 가장 빠르고 효율적으로 수행할 최적의 처리 경로를 생성해주는 DBMS 내부의 핵심엔진입니다
- 옵티마이저에서 여러가지 실행계획을 세우고, 최고의 효율을 갖는 실행계획을 판별한 후 그 실행계획에 따라 쿼리를 수행하게 되는 것

## DB 튜닝이 무엇인지 그리고 튜닝의 3단계에 대해 설명해주세요

- DB 튜닝이란 DB의 구조나, DB자체, 운영체제 등을 조정하여 DB시스템의 전체적인 성능을 개선하는 작업
- 튜닝은 DB설계튜닝 -> DBMS 튜닝 -> SQL 튜닝 단계로 진행할 수 있습니다
- 1단계 - DB설계튜닝(모델링관점)
  - DB 설계단계에서 성능을 고려하여 설계
  - 데이터 모델링, 인덱스 설계
  - 데이터파일, 테이블스페이스 설계
  - 데이터베이스 용량 산정
  - 튜닝사례: 반정규화, 분산파일배치
- 2단계 - DBMS 튜닝(환경관점)
  - 성능을 고려하여 메모리나 블록 크기 지정
  - CPU, 메모리 I/O에 관한 관점
  - 튜닝사례: Buffer 크기, Cache 크기
- 3단계 - SQL 튜닝(App 관점)
  - SQL 작성시 성능 고려
  - Join, Indexing, Sql execution plan
  - 튜닝사례: hash/join

## inner join과 outer join 의 차이를 설명해주세요

- inner join 은 서로 연관된 내용만 검색하는 조인방법입니다
  두 테이블을 조인할 때, 두 테이블에 모두 지정한 열의 데이터가 있어야한다
- outer join 은 한 쪽에는 데이터가 있고 한 쪽에는 데이터가 없는 경우, 데이터가 있는 쪽의 내용을 전부 출력하는 방법입니다
  두 테이플을 조인할 때, 1개의 테이블에만 데이터가 있어도 결과가 나온다
  outer join에는 LEFT OUTER JOIN, RIGHT OUTER JOIN, FULL OUTER JOIN이 있습니다

## group by 의 역할에 대해 설명해주세요

- 데이터를 그룹으로 묶어주는 기능을 한다. 주로 집계함수와 함께 사용된다
  집합 연산자는 COUNT, SUM, AVG, MAX, MIN 등이 있고, DISTINCT 와 같이 중복 데이터를 제거하는 특징이 있습니다

## DELETE, TRUNCATE, DROP의 차이를 설명해주세요

- DELETE는 데이터는 지우지만 테이블 용량은 줄어들지 않고 원하는 데이터만 골라서 지울 수 있습니다. 삭제 후 되돌릴 수 있습니다
- TRUNCATE는 전체 데이터를 한번에 삭제하는 방식입니다. 테이블 용량이 줄어들고 인덱스 등도 삭제되지만 테이블은 삭제할 수 없고, 삭제 후 되돌릴 수 없습니다
- DROP은 테이블 자체를 완전히 삭제하는 방식(공간, 인덱스, 객체 모두 삭제)입니다. 삭제 후 되돌릴 수 없습니다

## 데이터베이스 클러스터링과 리플리케이션의 차이에 대해 설명해주세요

- 클러스터링이란 여러 개의 DB 서버가 하나의 스토리지를 나눠서 처리하는 방식입니다
  - 장점
    - DB간의 데이터를 동기화하여 항상 일관성있는 데이터를 얻을 수 있다
      1개의 DB가 죽어도 다른 DB가 살아 있어 시스템을 장애없이 운영할 수 있다 (높은 가용성)
      기존에 하나의 DB 서버에 몰리던 부하를 여러 곳으로 분산시킬 수 있다(로드밸런싱)
  - 단점
    - 저장소 하나를 공유하면 병목현상이 일어날 수 있다
      서버를 동시에 운영하기 위한 비용이 많이 든다
- 리플리케이션은 여러 개의 DB를 권한에 따라 수직적인 구조로 구축하는 방식. 비동기 방식으로 사용된다
  - 장점
    - 읽기작업이 많다면 replication 만으로도 충분히 성능을 높일 수 있다
    - 비동기방식으로 운영되어 지연시간이 거의없다
  - 단점
    - 비동기방식으로 운영되어 동기화가 보장되지 않아 일관성있는 데이터를 얻지 못할 수 있다
    - Master DB가 다운되면 복구 및 대처가 까다롭다

## HAVING과 WHERE의 차이를 설명해주세요

- having은 그룹화 또는 집계가 발생한 후 필터링 하는데 사용되고
  where은 그룹화 또는 집계가 발생하기 전에 필터링하는데 사용됩니다

## JOIN에서 ON과 WHERE의 차이를 설명해주세요

- ON이 WHERE 보다 먼저 실행되어 JOIN을 하기 전에 필터링하고 (-> ON 조건으로 필터링이 된 레코드들 간 JOIN이 이뤄진다)
  WHERE은 JOIN을 한 후에 필터링 된다
