# 데이터베이스 2주차 스터디노트

## 면접 예상 질문

#### SQL

#### SQL에 대해서 설명해주세요. C언어와 같은 프로그래밍 언어와 어떤 차이가 있나요?

- SQL이란 관계형 데이터베이스 관리시스템(RDBMS)의 데이터를 관리하기 위해 설계된 특수 목적의 프로그래밍 언어이다.

- SQL은 완전한 프로그래밍 언어가 아니다. 데이터 부속어(data sublanguage)라고 불린다

  - 데이터베이스의 데이터와 메타데이터(데이터 구조에 관한 데이터)를 생성하고 처리하는 문법만 갖고 있다

#### 개발자가 작성한 SQL이 어떤 과정을 통해 실행되는지 설명해주세요

![image-20230803181606366](C:\Users\iui47\AppData\Roaming\Typora\typora-user-images\image-20230803181606366.png)

1.  SQL Parser
    해당 쿼리가 문법적으로 틀리지 않은지 확인
    해당 구문을 SQL 서버가 이해할 수 있는 단위들로 분해
2.  Optimizer
    시스템 통계, Object 통계정보 기반으로 수행경로를 비교하여 가장 효율적인 실행계획을 선택
3.  Row Source Generation
    최적화 거친 개념적인 실행계획을 실제 수행 가능한 코드 프로시저 형태로 변환

#### DML은 무엇인가요? 어떤 구문이 있는지도 설명해주세요

- 데이터조작어(Data Manipulation Language)는 테이블에 데이터를 검색, 삽입, 수정, 삭제하는데 사용한다
- SELECT, INSERT, DELETE, UPDATE문 등이 있다

#### DDL은 무엇인가요? 어떤 구문이 있는지도 설명해주세요

- 데이터정의어(Data Definition Language)는 테이블이나 관계의 구조를 생성하는데 사용한다
- CREATE, ALTER, DROP 문 등이 있다

#### DCL은 무엇인가요? 어떤 구문이 있는지도 설명해주세요

- 데이터제어어(Data Control Language)는 데이터의 사용권한을 관리하는데 사용한다
- GRANT, REVOKE 문 등이 있다

#### CASCADE 설정에 대해서 설명해주세요

- foreign key가 걸린 연관 데이터를 삭제할 수 있게하는 기능

#### VIEW에 대해서 설명해주세요

- VIEW는 하나 이상의 테이블을 합하여 만든 가상의 테이블이다
- 뷰는 SELECT 명령을 기록하는 데이터베이스 객체이다

#### SELECT 절의 처리순서에 대해서 설명해주세요

- SELECT 쿼리문은 다음의 총 6단계를 거친다
  `FROM`, `JOIN` -> `WHERE` -> `GROUP BY` -> `HAVING` -> `SELECT` -> `ORDER BY` -> `LIMIT`
- `FROM`
  조회할 테이블을 지정
  이후 `join`을 실행하여 하나의 가상테이블로 결합
- `WHERE`
  조건에 맞는 데이터를 필터링
- `GROUP BY`
  선택한 칼럼을 기준으로 그룹핑
- `HAVING`
  그룹핑 후에 각 그룹에 사용되는 조건 절
- `SELECT`
  여러 조건들을 처리한 후 남은 데이터에서 어떤 열을 출력해줄지 선택
- `ORDER BY`
  행의 순서를 어떻게 보여줄지 정렬
- `LIMIT`
  몇 개의 행을 보여줄지 결정

#### SELECT ~ FOR UPDATE 구문에 대해서 설명해주세요

- 동시적 제어를 위하여 특정 데이터(row)에 대해 배타적 LOCK를 거는 기능
- 특정 세션이 데이터에 대해 수정을 할 때까지 LOCK이 걸려 다른 세션이 데이터에 접근할 수 없다

#### GROUP BY절에 대해서 설명해주세요

- GROUP BY 구를 그룹으로 나눌 수 있다
- GROUP BY 구에 열을 지정하여 그룹화하면 열의 값이 같은 행들이 하나의 그룹으로 묶인다
- GROUP BY 구로 그룹화된 각각의 그룹이 하나의 집합으로서 집계함수의 인수로 넘겨진다

#### ORDER BY절에 대해서 설명해주세요

- SELECT 명령의 ORDER BY 구를 사용하면 검색결과의 행 순서를 바꿀 수 있다

#### INNER JOIN과 OUTER JOIN의 차이점에 대해서 설명해주세요

- JOIN: 두 개의 테이블을 서로 묶어서 하나의 결과를 만들어내는 것

- INNER JOIN: 두 테이블에 모두 지정한 열의 데이터가 있어야한다
- OUTER JOIN: 하나의 테이블에만 데이터가 있어도 결과가 나온다

#### LEFT OUTER JOIN, RIGHT OUTER JOIN에 대해서 설명해주세요

- LEFT OUTER JOIN: 왼쪽 테이블의 모든 값이 출력되는 조인
- RIGHT OUTER JOIN: 오른쪽 테이블의 모든 값이 출력되는 조인

#### CROSS JOIN에 대해서도 설명해주세요

- 한쪽 테이블의 모든 행과 다른 쪽 테이블의 모든 행을 조인시키는 기능
- 조인 결과 전체 행 개수는 두 테이블의 각 행의 개수를 곱한 값
- 카티션 곱이라고도 한다

#### 서브쿼리에 대해서 설명해주세요

- 서브쿼리는 1) SELECT 명령에 의한 데이터 질의이고, 2) 상부가 아닌 하부의 부수적인 질의이다

#### DROP, TRUNCATE, DELETE에 각각에 대해 설명해주세요. 어떤 차이가 있나요?

- DELETE: 데이터를 하나하나 (선택-WHERE) 제거하는 방식
- TRUNCATE: 전체 데이터를 한번에 삭제하는 방식
- DROP: 테이블 자체를 완전히 날려버리는 방식

|                        | DELETE             | TRUNCATE                     | DROP                 |
| ---------------------- | ------------------ | ---------------------------- | -------------------- |
| 명령어종류             | DML                | DDL                          | DDL                  |
| 처리속도               | 느림               | 빠름                         | 빠름                 |
| COMMIT                 | 사용자가 직접      | 자동                         | 자동                 |
| ROLLBACK<br />가능여부 | commit 이전엔 가능 | 불가                         | 불가                 |
| 삭제방식               | 데이터만 삭제      | 테이블을 CREATE상태로 되돌림 | 테이블까지 완전 제거 |

#### DISTINCT에 대해서 설명해주세요. 사용해본 경험도 설명해주세요.

#### SQL Injection 공격이 무엇인지 어떻게 공격을 예방할 수 있는지 설명해주세요

#### 알고 있는 SQL 안티패턴이 있다면 설명해주세요

#### 페이지네이션을 구현한다고 했을 때 쿼리를 어떻게 작성해야할까요?

- 페이지네이션 구현방법에는 offset 방식과 cursor 방식이 있습니다
- Offset방식: 클라이언트는 페이지 당 요청하는 자료의 개수와 현재 페이지 번호를 파라미터로 요청합니다
  서버에서는 오프셋 값을 구합니다
  오프셋 = (현재 페이지 번호 - 1) _ 페이지 당 요청하는 자료 개수
  쿼리: SELECT _ FROM {column} LIMIT {페이지 당 자료의 개수} OFFSET {오프셋}
- Cursor 방식: SELECT \* FROM {column} WHERE {id} > {기준값} LIMIT {페이지 당 자료의 개수}

## 인성면접

#### 면접예상질문

#### 개발자로서 자기소개 부탁드립니다

#### 개발자로서 본인의 장점은 어떤거라고 생각하시나요?

#### 개발자로서 본인의 단점은 어떤거라고 생각하시나요?

#### 3년 뒤, 5년 뒤에 어떤 개발자가 되는게 목표인가요?

## 공부자료

#### 뷰의 장점

- 편린성 및 재사용성: 자주 사용하는 복잡한 쿼리를 정의해두면 편리하다
- 보안성: 각 사용자 별로 보안이 필요한 데이터를 제외하여 선별하여 보여줄 수 있다
- 독립성: 테이블 구조가 변경하더라도 뷰에서 조회하는 컬럼이 그대로라면 뷰를 사용하는 응용프로그램은 변하지 않는다

#### 락의 유형

- 락: 트랜잭션이 다루는 데이터를 다른 트랜잭션이 접근하지 못하도록 막아 대기상태로 만드는 것
- 공유락(LS, shared lock): 트랜잭션이 읽기를 할 때 사용하는 락
  배타락(LX, exclusive lock): 트랜잭션이 읽기/쓰기를 할 때 사용하는 락

#### 락의 규칙

- 데이터에 락이 걸려있지 않으면 트랜잭션은 데이터에 락을 걸 수 있다
- 트랜잭션이 데이터 X를 읽기만 할 경우 LS(X)를 요청하고, 읽거나 쓰기를 할 경우 LX(X)를 요청한다
- 다른 트랜잭션이 데이터에 LS(X)를 걸어두면, LS(X)의 요청은 허용하고 LX(X)는 허용하지 않는다
- 다른 트랜잭션이 데이터에 LX(X)를 걸어두면, LS(X)와 LX(X) 모두 허용하지 않는다
- 트랜잭션이 락을 허용받지 못하면 대기상태가 된다

#### 집계함수

- 일반적인 함수는 하나의 행에 대하여 하나의 값을 반환하지만 집계함수는 집합으로부터 하나의 값을 반환한다
