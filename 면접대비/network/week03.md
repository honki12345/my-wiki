# 컴퓨터네트워크 3주차 스터디노트

## 면접 예상 질문

### 신뢰적 데이터 전송의 원리

#### 슬라이딩 윈도우가 뭘까요?

- 수신 측에서 설정한 윈도우 크기만큼 송신측에서 확인응답(ACK) 없이 전송할 수 있게 하여 흐름을 동적으로 조절하는 제어 알고리즘
- 윈도우(window)에 포함되는 모든 패킷을 전송하고, 전송이 확인되는 대로 윈도우를 옆으로 옮겨(slide) 다음 패킷들을 전송하는 방식

#### Go Back N에 대해 설명해주세요.

- Go-Back-N 방식은 receiver 측에서 순서대로 받지 못한 패킷이 있다면 해당 패킷부터 다시 재전송하는 방식

#### Selectvie Repeat에 대해 설명해주세요.

- Selective Repeat 방식은 receiver 측에서 받은 각각의 패킷들에 대해 ACK를 보내는 방식

### TCP

#### TCP에 대해 설명해주세요

- TCP 는 메일이나, 파일 전송 같이 데이터 전송의 신뢰성을 요구하는 애플리케이션에서 사용합니다
- TCP는 데이터 송신 전에 TCP 커넥션이라는 논리적 통신로를 만듭니다.

#### 3 way handshake에 대해 설명해주세요

- 3웨이 핸드셰이크는 커넥션을 확립하기 전에 인사를 수행하는 절차입니다.
- 클라이언트와 서버는 3웨이 핸드셰이크 과정에서 서로 지원하는 기능이나 시퀀스 번호를 결정하고 **오픈**이라 불리는 작업을 수행합니다.

##### 흐름

1. 3웨이 핸드셰이크 전 클라이언트는 `CLOSED` , 서버는 `LISTEN` 상태입니다.
    - `CLOSED`는 커넥션이 완전히 닫혀 있는 상태, 아무것도 하지 않는 상태입니다
    - `LISTEN`은 클라이언트로부터 커넥션을 기다리는 상태입니다
2. 클라이언트는 SYN 플래그를 `1`, 시퀀스 번호에 무작위값을 설정한 SYN 패킷을 송신하고 오픈 처리에 들어갑니다. 
    이 처리에 따라 클라이언트는 `SYN-SENT` 상태로 이동하고, SYN/ACK 패킷을 기다립니다
3. SYN 패킷을 받아들인 서버는 패시브 오픈 처리에 들어갑니다
    SYN 플래그와 ACK 플래그를 `1`로 설정한 SYN/ACK 패킷을 반환하고, `SYN-RECEIVED` 상태로 이동합니다. 이때의 시퀀스 번호는 무작위, 확인 응답번호는 SYN 패킷의 시퀀스 번호에 `1` 을 더한 값이 됩니다.
4. SYN/ACK 패킷을 받아들인 클라이언트는 ACK 플래그를 `1` 로 설정한 ACK 패킷을 반환하고 `ESTABLISHED` 상태로 이동합니다.
    `ESTABLISHED` 는 커넥션이 완료된 상태입니다. 이 상태가 되면 실제 데이터를 송수신할 수 있습니다.
5. ACK 패킷을 받아들인 서버는 `ESTABLISHED` 상태로 이동합니다. 
    이제까지의 시퀀스 번호와 확인 응답 번호의 교환에 따라, 애플리케이션 데이터의 최초에 부여된 시퀀스 번호가 각각 확정됩니다

##### 약식

1. 클라이언트가 서버에 TCP 연결요청을 하고
2. 서버는 이에 대한 응답을 하고
3. 마지막으로 클라이언트가 다시 한번 자신이 가용상태임을 응답해줌으로 연결이 설정

#### 4 way handshake에 대해 설명해주세요

- 4WHS(4 Way HandShake) 는 커넥션을 종료하기 위한 처리 순서를 의미합니다. 커넥션 종료 처리에 실패하면 불필요한 커넥션이 단말에 남아, 단말의 리소스가 부족해지게 되므로 중요합니다.
- 클라이언트아 서버는 4웨이 핸드셰이크 중에서 FIN 패킷(FIN 플래그가 `1`인 TCP 세그먼트)를 서로 교환하고 `클로즈(CLOSE)` 라 부르는 정리를 수행합니다.
    FIN 플래그는 '더이상 교환할 데이터가 없습니다' 를 의미하는 플래그로, 상위 애플리케이션의 동작에 맞춘 형태로 부여됩니다
- 클로즈는 클라이언트와 서버 어느쪽에서 FIN 을 보내면서 시작한다고 명확하게 정의되어 있지 않습니다. 먼저 FIN 을 송출해서 커넥션을 종료하려는 측의 처리를 **액티브 클로즈(active close)**, 받는 측의 처리를 **패시브 클로즈(passive close)**라 부릅니다.



#### Congestion control에 대해 설명해주세요

- 혼잡제어는 송신 측 단말이 수행하는 흐름양 조정입니다
- 혼잡(congestion) 이란 간단히 말하면 네트워크의 복잡한 상태입니다. 패킷이 혼잡하게 되면 네트워크 기기가 처리할 수 없게 되거나 회선의 대역 제한에 걸려 패킷이 소실되거나 전송에 시간이 걸리게 됩니다
- TCP 는 대량의 송신 패킷에 의해 네트워크가 혼잡하지 않도록 **혼잡 제어 알고리즘(congestion control algorithm)** 을 이용해 패킷 송신 수를 제어합니다. 이 패킷 송신 수를 **혼잡 윈도우(cwnd, Congestion Window)** 라 부릅니다. 혼잡 제어 알고리즘은 혼잡하면 혼잡 윈도우를 줄이고 혼잡하지 않으면 윈도우를 늘립니다.

#### Flow control에 대해 설명해주세요

- 송신 측이 수신 측의 처리 속도보다 더 빨리 데이터를 보내지 못하도록 제어해주는 것
    수신 측에서 송신 측 발송 데이터의 속도를 제한한다. 이를 위해 수신 측에서 데이터 넘침을 송신 측에 통보하는 피드백 메커니즘이 필요하다

### 인성면접

#### 팀 프로젝트에서 주로 어떤 역할을 담당하셨나요?

#### 팀 프로젝트 하면서 의견 충돌이 발생했던 경험에 대해서 설명해주세요

#### 팀원들에게 자신은 어떤 팀원으로 생각될 것 같으세요?

#### 본인이랑 잘 안 맞는 팀원이 있다면 어떻게 업무하실건가요?

#### 본인의 의견이 팀에서 잘 받아들여지지 않을 경우 어떻게 하실건가요?

### 추가학습

#### 윈도우 크기

- 확인 응답을 기다리지 않고 받을 수 있는 데이터크기
- 윈도우 크기는 2바이트(16비트)로 구성되며, 최대 65535 바이트까지 알릴 수 있어 `0`이 더이상 받을 수 없음을 나타낸다. 송식 측 단말은 윈도우 크기가 `0`인 패킷을 받으면 일단 송신을 멈춘다

#### 재전송 제어

- 재전송 제어는 패킷 유실이 발생했을 때 수행하는 패킷 재전송 기능
- TCP 는 ACK 패킷을 통해 패킷 유실을 감지하고, 패킷을 재전송합니다.
    재전송 제어가 발동하는 시점은 수신 측 단말이 계기가 되어 **중복 ACK(duplicate ACK)**와 송식 측 단말이 계기가 되어 수행되는 **재전송 타임아웃(RTO, Retransmission Time Out)** 2가지이다.

